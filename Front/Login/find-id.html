<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아이디 찾기</title>
    <link rel="stylesheet" href="../css/id-passwrod.css">
</head>

<body>

    <div class="container">
        <!-- 로고 영역 -->
        <div class="logo">
            <img src="../img/logo.png" alt="로고">
            <p class="tagline">등록된 이메일을 입력하시면 아이디를 확인하실 수 있습니다.</p>
        </div>

        <div class="form-group">
            <div class="input-container">
                <input type="email" id="email" name="email" placeholder=" ">
                <label for="email">이메일</label>
                <button id="verifyEmailButton" onclick="sendVerificationEmail()">발송</button>
            </div>
        </div>
        
    </div>

    <script>
        // 이메일 유효성 검사
        function validateEmail(email) {
            const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;
            return regex.test(email);
        }

        // 이메일 인증을 위한 함수
        function sendVerificationEmail() {
            const email = document.getElementById('email').value;

            if (!email) {
                alert('이메일을 입력해주세요.');
                return;
            }

            // 이메일 형식 검사
            if (!validateEmail(email)) {
                alert('올바른 이메일 주소를 입력해주세요.');
                return;
            }

            // 이메일 인증 요청
            fetch('/request-email-verification', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email })
            })
            .then(response => response.json())
            .then(data => {
                alert('인증 이메일이 발송되었습니다.');
                document.getElementById('verifyEmailButton').disabled = true;  // 버튼 비활성화
                // 인증 후 아이디 찾기 버튼 활성화 등 추가 로직
            })
            .catch(error => {
                console.error('Error:', error);
                alert('인증 이메일 발송에 실패했습니다.');
            });
        }

    </script>

</body>

</html>
